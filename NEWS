MGP v 1.12.5 6/20/25
-------------------
  * replace 'Driver' in dbConn() function with an environment variable
  * replaced static 'SUNetID' with the 'INSTITUTION_ID' env variable; if not set,
  default to 'Instution ID'
  * changed logging for SUNetID username; if 'SHINYPROXY_USERNAME' env variable is not set,
  the institution name and ShinyProxy username will not be logged'
  * replaced hard coded maintainer e-mail with an environment variable and replaced in 
  executeMGPServer(), server.R, and instructions.R

MGP v 1.12.4 5/30/25
-------------------
  * fixed getTestNumbers() to only look for billable IgG tests
  * added patient ITL to log before execute MGP starts - in case failure occurs during typing, it'll be captured in Splunk
  * added tryCatch during getTyping + a reactive for assessing if there was an exception during that block. if yes, output
  error message and enable download log instead of allowing app to crash
  * removed extraneous textOutput('p_itl') in ui.R

MGP v 1.12.3 3/25/25
-------------------
  * made function for determining if an allele is NMDP and replaced code accordingly
  * fixed issue in calcDSA where if an NMDP allele ended with a 'P' or 'L', the 
  suffix variant was being removed in the code, causing an incorrect NMDP code to 
  be evaluated. revised logic to if the allele ends with a 'P' or 'L' and is not
  an NMDP allele
  * applied the same logic for skipping 'Q' alleles
  * fixed issue of executeMGPServer not running properly if there is a novel allele;
  there were missing parameters for donor_filter and recipient_filter

MGP v 1.12.2 2/11/25
-------------------
  * revised surrogate logic to rely on sero tables converted from KO's sero 
  conversion tables -- see workflow for more details
  * added new sero tables for HLA-A, B, C, DRB1/3/4/5, and DQB1 (v 3.58.0)
  * updated sero tables for HLA-DPA1, DPB1, and DQA1 (v 3.58.0)
  * added 'P' suffix variant to sub out for DSA anlysis if being evaluated 
  * added logic to accommodate DRB3 and DRB5 serological equivalencies with 
  proposed nomenclature
  * took out adding recipient null alleles to DSA determination
  * in TCE eval - if recipient and/or donor has a NULL variant allele, replace it
  with the non-NULL allele
  
MGP v 1.12.1 2/4/25
-------------------
  * added logic to filter out the following alleles if the antigen group is used
  as a surrogate, since these alleles are serologically distinct
    A2: A*02:03, A*02:10
    A24: A*24:03
    B35: B*35:12, B*35:02
    B62: B*15:24
    Cw16: C*16:02
    
MGP v 1.12.0 2/3/25
-------------------
  * fixed issue with incorrect DSA calling for class II 
  * changed DSA evaluation to evaluate all alleles 
  * DSAs along with MFIs now appear in the UI if there are DSAs
  * added DP comparison code in getTCE to evaluate same p-groups
  * added code to take into account abs that are called differently if called asp
  * code refactoring to avoid redundancy in executeMGP
  * removed NMDP reference file checks
  
MGP v 1.11.0 1/5/25
-------------------
  * Changed logic for NMDP code conversion - removed NMDP reference file and use MAC API instead
  * Added logic to add A*02:03 to called antibodies during DSA assessment if 
  A203 is in called antibodies, since it's called differently than A2
  * Bug fixes
    -filtered out Bw4 and Bw6 from antibody calling results so the actual AG 
    is used if surrogacy is needed
  * Updated R version to 4.4.2
  * Updated packages + lockfile
  
MGP v 1.10.0 11/8/24
-------------------
  * Bug fixes
    -corrected issue w. DRB345 not showing up in mismatches
    -fixed DSA issue with NULL variants; hvg_mm_allele was used instead of 
    recip_null_allele when subbing out the last character of the NULL variant
    -used %in% instead of == w/ comparing mismatched alleles and same p-group
    in cases where the mismatched allele has the same p-group as multiple alleles
    -redid logic for handling NULL variants and alleles with the same p-group - see workflow for more details
    -corrected issue with grepl(mm_locus), where NMDP alleles with the same letter as the locus would cause issues
  * Added logic for cases where DP alleles have the same p-group, leading to no 
  mismatches - TCE in these cases should be M
  *Updated NMDP reference file
    
MGP v 1.9.1 11/4/24
-------------------
  * Bug fixes - fixed order of loci MM display and added trimmed_allele 
  to calcDPDQ when evaluating GvH mismatches - it was missed before, causing
  all mismatched alleles for donors to disappear if there were mismatched alleles
  with the same P-group
  
MGP v 1.9.0 11/1/24
-------------------
  *Moved MM logic into if mgp$res; otherwise the app crashes instead of the job failure 
  being captured
  *Added an error message to the main panel if job failure is due to sample number
  associated with Recipient DSA Date field in the MG software not having any IgG tests
  associated
  *Added an error message to the main panel if the job failure is due to an NMDP code
  not being found in the NMDP reference file
  *Updated the NMDP reference file
  
MGP v 1.8.0 10/21/24
-------------------
  * Added mismatched alleles for locus specific alleles to main panel and log
  * Revised logic in calcABCDRB and calcDPDQ - if a recipient mismatched allele has the same P group as a mismatched 
  donor allele, remove the mismatched donor allele from evaluation 
  * Redid logic for handling donor and recipient phenotypes with the same P group - see workflow for more details
  * Redid log placement
  * Bug fixes
  * Updated NMDP reference file
  
MGP v 1.7.0 10/17/24
-------------------
* Added a pop-up window at the end of a run if the donor and/or recipient has an
  allele that does not have a complete sequence for the ARD in the IMGT reference alignment
* Updated IMGT protein alignmments to version 3.58.0 
* Updated NMDP reference file

MGP v 1.6.0 10/9/24
-------------------
* Code refactoring for NMDP code translation
* Modified NMDP logic for recipient alleles - if mismatched recip allele
 is found in NMDP code, remove corresponding NMDP allele from the mismatched donor
 allele
* Added exception logic for DRB1*04:92/DRB1*04:07 for NMDP alleles 
* Bug fixes
* Updated NMDP reference file

MGP v 1.5.0 10/4/24
-------------------
* Added exception to remove DRB1*04:92 and DRB1*04:07 from mismatched alleles if both alleles are 
  present in donor mismatched alleles and recipient mismatched alleles
* Updated NMDP reference file

MGP v 1.4.0 8/29/24
-------------------
  *Added novel allele handling functionality. Novel alleles will prompt a window
  to appear, asking questions to help determine the nature of the mutation of
  the novel allele
  *Code refactoring
  *Modularized running calcMatchGrade for usage w 'finish' in pop up window and 'run'
  *Changed busy spinner

MGP v 1.3.1 8/19/2024
-------------------
  *Updated NMDP reference file
  *Added check for if NMDP codes are not found. Log NMDP alleles not found and stop
  execution
  *Revised the NMDP reference file naming convention to nmdp-lastupdateddateperfile.rda

  
MGP v 1.3.0 7/19/2024
-------------------
  *Added review functionality to MGP. Users with Supervisor or Director level access
  will only be able to review what is populated in the Match Grade Software and what 
  is calculated by MGP, where any discrepancies between the two tables are noted. Users
  with technologist level access will only be able to perform calculations with MGP.
  *Updated alignments to v 3.57.0
  *Modified BLAASD to append the suffix to any suffix alleles in the trimmed_allele columns.
  Suffixes were not captured previously for suffix alleles > 2 fields

MGP v 1.2.0 6/10/2024
-------------------
  *Minor change to logic to calculate the total number of mismatches. Instead of
  calculating matches by Total Matches = Total - max(GvH, HvG), calculate number
  of mismatches to subtract from by taking the max of GvH and HvG at each locus 
  and adding them all together; subtract total from that sum
  *Moved check for NMDP alleles to donor assessment for loop; no need to examine
  entire MG DF for NMDP if only one donor will be processed at a time.
  *Add version # to nmdp.rda file. Use file path with 'nmdp' pattern to load
  file. This is to accomodate future auto-upload of NMDP files

MGP v 1.1.1 5/3/2024
-------------------
  *Data type conversion for donor selection to character - otherwise updated numeric
  values are appended with a '.'
  *Minor fix to the 'Run MGP' button logic. Since only one donor is selected a time,
  logic for enabling button was not occurring for subsequent runs after the first run,
  since there was technically no donor selection. Added a 'Nothing selected' as the 
  default option, which now ensures the 'Run MGP' button is disabled until
  a donor is selected.

MGP v 1.1.0 4/24/2024
-------------------
  *Changes to sample number derivation -- if a recipient does not have IgG testing, 
  'Recipient DSA Date' is to be left blank. DSA will be set to 'U'. 
  *For a given sample number, filter to only LSAB1 and LSAB2 results
  *Changes to the 'Donor Selection' drop down. Only one donor may be selected at a time,
  and choices are now the donor's last name + first name + donor ITL, instead of only the donor ITL. 
  *Changes to instructions
  
MGP v 1.0.0 3/24/2024
-------------------
  *Initial release